{"ast":null,"code":"import{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const storedUser=localStorage.getItem('usuarioMercado');if(storedUser){setUser(JSON.parse(storedUser));console.log('%c[Auth] Usuario cargado desde localStorage','color: green');}},[]);const login=data=>{setUser(data);localStorage.setItem('usuarioMercado',JSON.stringify(data));console.log('%c[Auth] Usuario logueado:','color: blue',data);};const logout=()=>{setUser(null);localStorage.removeItem('usuarioMercado');console.log('%c[Auth] Usuario deslogueado','color: red');};const isAdmin=(user===null||user===void 0?void 0:user.rol)==='admin';const isCliente=(user===null||user===void 0?void 0:user.rol)==='cliente';return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout,isAdmin,isCliente},children:children});};export const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["createContext","useContext","useState","useEffect","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","storedUser","localStorage","getItem","JSON","parse","console","log","login","data","setItem","stringify","logout","removeItem","isAdmin","rol","isCliente","Provider","value","useAuth"],"sources":["C:/MercadoAgricola-/frontend/src/context/AuthContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null); \r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('usuarioMercado');\r\n    if (storedUser) {\r\n      setUser(JSON.parse(storedUser));\r\n      console.log('%c[Auth] Usuario cargado desde localStorage', 'color: green');\r\n    }\r\n  }, []);\r\n\r\n  const login = (data) => {\r\n    setUser(data);\r\n    localStorage.setItem('usuarioMercado', JSON.stringify(data));\r\n    console.log('%c[Auth] Usuario logueado:', 'color: blue', data);\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    localStorage.removeItem('usuarioMercado');\r\n    console.log('%c[Auth] Usuario deslogueado', 'color: red');\r\n  };\r\n\r\n  const isAdmin = user?.rol === 'admin';\r\n  const isCliente = user?.rol === 'cliente'; \r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout, isAdmin, isCliente }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvE,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAS,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CACzD,GAAIF,UAAU,CAAE,CACdD,OAAO,CAACI,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,CAAC,CAC/BK,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAE,cAAc,CAAC,CAC5E,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,KAAK,CAAIC,IAAI,EAAK,CACtBT,OAAO,CAACS,IAAI,CAAC,CACbP,YAAY,CAACQ,OAAO,CAAC,gBAAgB,CAAEN,IAAI,CAACO,SAAS,CAACF,IAAI,CAAC,CAAC,CAC5DH,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAE,aAAa,CAAEE,IAAI,CAAC,CAChE,CAAC,CAED,KAAM,CAAAG,MAAM,CAAGA,CAAA,GAAM,CACnBZ,OAAO,CAAC,IAAI,CAAC,CACbE,YAAY,CAACW,UAAU,CAAC,gBAAgB,CAAC,CACzCP,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAE,YAAY,CAAC,CAC3D,CAAC,CAED,KAAM,CAAAO,OAAO,CAAG,CAAAf,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgB,GAAG,IAAK,OAAO,CACrC,KAAM,CAAAC,SAAS,CAAG,CAAAjB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgB,GAAG,IAAK,SAAS,CAEzC,mBACErB,IAAA,CAACC,WAAW,CAACsB,QAAQ,EAACC,KAAK,CAAE,CAAEnB,IAAI,CAAES,KAAK,CAAEI,MAAM,CAAEE,OAAO,CAAEE,SAAU,CAAE,CAAAlB,QAAA,CACtEA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,MAAM,CAAAqB,OAAO,CAAGA,CAAA,GAAM7B,UAAU,CAACK,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}